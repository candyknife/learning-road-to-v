# 2.3 å­—ç¬¦ä¸²

    name := 'Bob'
    assert name.len == 3       // will print 3
    assert name[0] == u8(66) // indexing gives a byte, u8(66) == `B`
    assert name[1..3] == 'ob'  // slicing gives a string 'ob'

    // escape codes
    windows_newline := '\r\n'      // escape special characters like in C
    assert windows_newline.len == 2

    // arbitrary bytes can be directly specified using `\x##` notation where `#` is
    // a hex digit aardvark_str := '\x61ardvark' assert aardvark_str == 'aardvark'
    assert '\xc0'[0] == u8(0xc0)

    // or using octal escape `\###` notation where `#` is an octal digit
    aardvark_str2 := '\141ardvark'
    assert aardvark_str2 == 'aardvark'

    // Unicode can be specified directly as `\u####` where # is a hex digit
    // and will be converted internally to its UTF-8 representation
    star_str := '\u2605' // â˜…
    assert star_str == 'â˜…'
    assert star_str == '\xe2\x98\x85' // UTF-8 can be specified this way too.

## 2.3.1 å­—ç¬¦ä¸²å®šä¹‰ä¸ç”¨æ³•

V ä¸­ï¼Œå­—ç¬¦ä¸²æ˜¯ä¸€ä¸ªåªè¯»çš„å­—èŠ‚åºåˆ—ã€‚æ‰€æœ‰çš„ Unicode å­—ç¬¦ç”¨ UTF-8 ç¼–ç ã€‚

    s := 'hello ğŸŒ' // emoji takes 4 bytes
    assert s.len == 10

    arr := s.bytes() // convert `string` to `[]u8`
    assert arr.len == 10

    s2 := arr.bytestr() // convert `[]byte` to `string`
    assert s2 == s

**å­—ç¬¦ä¸²å˜é‡ä¸å¯æ”¹å˜**ã€‚ä½ ä¸èƒ½æ”¹å˜å…ƒç´ ï¼š

    mut s := 'hello ğŸŒ'
    s[0] = `H` // not allowed

> error: cannot assign to s[i] since V strings are immutable

æ³¨æ„ï¼Œç´¢å¼•ä¸€ä¸ªå­—ç¬¦ä¸²ä¼šå¾—åˆ°ä¸€ä¸ª `byte`ï¼Œæ—¢ä¸æ˜¯ `rune` ä¹Ÿä¸æ˜¯å¦ä¸€ä¸ª `string`ã€‚ç´¢å¼•ä¸å­—ç¬¦ä¸²ä¸­çš„å­—èŠ‚ä¸€ä¸€å¯¹åº”ï¼Œè€Œä¸æ˜¯ Unicode ç ã€‚å¦‚æœä½ æƒ³å°† `byte`
è½¬æ¢æˆ `string`ï¼Œåœ¨ `byte` ç±»å‹ä¸Šä½¿ç”¨ `.ascii_str()` æ–¹æ³•ï¼š

    country := 'Netherlands'
    println(country[0]) // Output: 78
    println(country[0].ascii_str()) // Output: N

å•åŒå¼•å·éƒ½å¯ä»¥ç”¨æ¥è¡¨ç¤ºå­—ç¬¦ä¸²ã€‚ä¸ºäº†ä»£ç ä¸€è‡´æ€§ï¼Œ`vfmt` ä¼šå°†åŒå¼•å·è½¬æ¢æˆå•å¼•å·ï¼Œé™¤éå­—ç¬¦ä¸²å·²ç»åŒ…å«äº†å•å¼•å·å­—ç¬¦ã€‚

å­—ç¬¦ä¸²å‰åŠ ä¸Š `r` å¯ä»¥å¾—åˆ°åŸå§‹å­—ç¬¦ä¸²ã€‚è½¬ä¹‰å¤„ç†ï¼ˆEscape handlingï¼‰åœ¨åŸå§‹å­—ç¬¦ä¸²ä¸­ä¸ä¼šè¿›è¡Œï¼š

    s := r'hello\nworld' // the `\n` will be preserved as two characters
    println(s) // "hello\nworld"

å­—ç¬¦ä¸²å¯ä»¥å¾ˆå®¹æ˜“åœ°è½¬æ¢æˆæ•´å‹ï¼š

    s := '42'
    n := s.int() // 42

    // all int literals are supported
    assert '0xc3'.int() == 195
    assert '0o10'.int() == 8
    assert '0b1111_0000_1010'.int() == 3850
    assert '-0b1111_0000_1010'.int() == -3850

å…¶ä»–æ›´å¤šé«˜çº§çš„ `å­—ç¬¦ä¸²` å¤„ç†ä¸è½¬æ¢ï¼Œå‚è€ƒ [vlib/strconv](https://modules.vlang.io/strconv.html) æ¨¡å—ã€‚

## 2.3.2 å­—ç¬¦ä¸²å†…æ’ï¼ˆString interpolationï¼‰

åŸºæœ¬çš„å†…æ’å¥æ³•ååˆ†ç®€å•â€”â€”åœ¨å˜é‡å‰ä½¿ç”¨ `$`ã€‚å˜é‡å°†ä¼šè½¬æˆå­—ç¬¦ä¸²å¹¶åµŒå…¥åœ¨å¥å­ä¸­ï¼š

    name := 'Bob'
    println('Hello, $name!') // Hello, Bob!

å¯¹äºåŸŸä¸­çš„å˜é‡ä¹Ÿå¯ä»¥ä½¿ç”¨ï¼š`'age = $user.age'`ã€‚å¦‚æœä½ éœ€è¦æ›´å¤æ‚çš„è¡¨è¾¾ï¼Œä½¿ç”¨ `${}`ï¼š`'can register = ${user.age > 13}'`ã€‚

## 2.3.3 å­—ç¬¦ä¸²æ ¼å¼åŒ–è¾“å‡º

V æ”¯æŒä¸ C ä¸­ `printf` ç›¸ä¼¼çš„æ ¼å¼è¯´æ˜ç¬¦ã€‚`f`ã€`g`ã€`x`ã€`o`ã€`b` ç­‰éƒ½å¯ä»¥ä½œä¸ºé€‰é¡¹æ¥è¯´æ˜è¾“å‡ºæ ¼å¼ã€‚ç¼–è¯‘å™¨å¾ˆæ³¨é‡å­˜å‚¨å¤§å°ï¼Œæ‰€ä»¥æ²¡æœ‰ `hd` æˆ–è€… `llu`ã€‚

è¦ä½¿ç”¨æ ¼å¼è¯´æ˜ç¬¦ï¼Œéµå¾ªä»¥ä¸‹æ ¼å¼ï¼š

`${varname:[flags][width][.precision][type]}`

- flags: å¯ä»¥ä¸º 0 æˆ–ä»¥ä¸‹é€‰é¡¹
    - `-` è¾“å‡ºå·¦å¯¹é½ã€‚
    - `+` è¾“å‡ºå³å¯¹é½ã€‚æ— é¡»ä½¿ç”¨ï¼Œè¯¥é€‰é¡¹ä¸ºé»˜è®¤ã€‚
    - `0` ç”¨â€˜0â€™ä½œä¸ºå¡«å……å­—ç¬¦è€Œä¸æ˜¯é»˜è®¤çš„â€˜ç©ºæ ¼â€™ã€‚
    - æ³¨æ„ï¼šV ç°åœ¨ä¸æ”¯æŒç”¨ `'` æˆ–è€… `#` ä½œä¸ºæ ¼å¼æ ‡å¿—ã€‚
- width: æ•´æ•°ï¼Œæè¿°æ‰“å°è¾“å‡ºçš„æœ€å°å®½åº¦ã€‚
- precision: è¾“å…¥å˜é‡æ˜¯æµ®ç‚¹æ—¶ï¼Œè·Ÿåœ¨ `.` åé¢çš„æ•´æ•°æè¿°ç²¾ç¡®åˆ°å°æ•°ç‚¹åçš„ä½æ•°ã€‚å˜é‡ä¸ºæ•´å‹æ—¶å¿½ç•¥ã€‚
- type:
    - `f`ã€`F` æµ®ç‚¹æ•°
    - `e`ã€`E` æŒ‡æ•°å½¢å¼çš„æµ®ç‚¹æ•°
    - `g`ã€`G` æµ®ç‚¹æ•°ï¼Œæµ®ç‚¹è¡¨ç¤ºæ³•è¡¨ç¤ºå°å€¼ï¼ŒæŒ‡æ•°è¡¨ç¤ºæ³•è¡¨ç¤ºå¤§å€¼
    - `d` 10 è¿›åˆ¶æ•´æ•°
    - `x` 16 è¿›åˆ¶æ•´æ•°
    - `o` 8 è¿›åˆ¶æ•´æ•°
    - `b` 2 è¿›åˆ¶æ•´æ•°
    - `s` å­—ç¬¦ä¸²ï¼Œå‡ ä¹ä»ä¸ä½¿ç”¨

æ³¨æ„ï¼šå½“æ•°å­—ç±»å‹éœ€è¦å‘ˆç°å­—æ¯æ—¶ï¼ˆå¦‚åå…­è¿›åˆ¶å­—ç¬¦ä¸²æˆ–æ— é™å¤§ç­‰ç‰¹æ®Šå€¼ï¼‰ï¼Œå°å†™ç‰ˆæœ¬çš„ç±»å‹å¼ºåˆ¶ä½¿ç”¨å°å†™å­—æ¯ï¼Œå¤§å†™ç‰ˆæœ¬å¼ºåˆ¶ä½¿ç”¨å¤§å†™å­—æ¯ã€‚

æ³¨æ„ï¼šç»å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæœ€å¥½è®©ç±»å‹é‚£ä¸€é¡¹ä¸ºç©ºã€‚æµ®ç‚¹æ•°ä¼šè‡ªåŠ¨ä»¥ `g` æ¸²æŸ“ï¼Œæ•´æ•°è‡ªåŠ¨ä»¥ `d` æ¸²æŸ“ï¼Œ`s` æ°¸è¿œæ˜¯å†—ä½™çš„ã€‚åªæœ‰ä»¥ä¸‹ä¸‰ç§æƒ…å†µæ¨èæ¸…æ™°åœ°æ ‡æ˜ç±»å‹ï¼š

- æ ¼å¼åŒ–å­—ç¬¦ä¸²åœ¨ç¼–è¯‘æ—¶è§£æï¼Œå› æ­¤æŒ‡å®šç±»å‹å¯ä»¥å¸®åŠ©æ£€æµ‹é”™è¯¯ã€‚
- æ ¼å¼åŒ–å­—ç¬¦ä¸²é»˜è®¤ä½¿ç”¨å°å†™å­—æ¯è¡¨ç¤ºåå…­è¿›åˆ¶æ•°å­—ï¼Œä¸”åœ¨æŒ‡æ•°ä¸­ä½¿ç”¨å°å†™å­—æ¯ã€‚å¯ä»¥ä½¿ç”¨å¤§å†™ç±»å‹æ ‡å¿—å¼ºåˆ¶åœ¨åå…­è¿›åˆ¶æ•°å­—ä¸æŒ‡æ•°ä¸­ä½¿ç”¨å¤§å†™å­—æ¯ã€‚
- æ ¼å¼åŒ–å­—ç¬¦ä¸²æ˜¯è·çŸ¥æ•´æ•°çš„åå…­è¿›åˆ¶ã€äºŒè¿›åˆ¶æˆ–å…«è¿›åˆ¶å­—ç¬¦ä¸²çš„æœ€æ–¹ä¾¿æ–¹æ³•ã€‚

è¿›ä¸€æ­¥äº†è§£è¯·é˜…è¯» [Format Placeholder Specification](https://en.wikipedia.org/wiki/Printf_format_string#Format_placeholder_specification)ã€‚

    x := 123.4567
    println('[${x:.2}]') // round to two decimal places => [123.46]
    println('[${x:10}]') // right-align with spaces on the left => [   123.457]
    println('[${int(x):-10}]') // left-align with spaces on the right => [123       ]
    println('[${int(x):010}]') // pad with zeros on the left => [0000000123]
    println('[${int(x):b}]') // output as binary => [1111011]
    println('[${int(x):o}]') // output as octal => [173]
    println('[${int(x):X}]') // output as uppercase hex => [7B]

    println('[${10.0000:.2}]') // remove insignificant 0s at the end => [10]
    println('[${10.0000:.2f}]') // do show the 0s at the end, even though they do not change the number => [10.00]

### 2.3.4 å­—ç¬¦ä¸²æ“ä½œ

    name := 'Bob'
    bobby := name + 'by' // + is used to concatenate strings
    println(bobby) // "Bobby"
    mut s := 'hello '
    s += 'world' // `+=` is used to append to a string
    println(s) // "hello world"

V ä¸­çš„æ‰€æœ‰æ“ä½œéƒ½å¿…é¡»ä¿è¯ä¸¤è¾¹ç±»å‹ä¸€è‡´ã€‚ä½ ä¸èƒ½å°†æ•´å‹æ‹¼æ¥åˆ°å­—ç¬¦ä¸²ä¸Šï¼š

    age := 10
    println('age = ' + age) // not allowed

> error: infix expr: cannot use `int` (right expression) as `string`

æ­¤æ—¶å¿…é¡»å…ˆå°† `age` è½¬æ¢æˆ `string`ï¼š

    age := 11
    println('age = ' + age.str())

æˆ–è€…ä½¿ç”¨å­—ç¬¦ä¸²å†…æ’ï¼ˆæ¨èè¯¥ç”¨æ³•ï¼‰ï¼š

    age := 12
    println('age = $age')
